<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="xBIM Toolkit is an Open Source toolkit for IFC and BIM. You can use it to do anything with IFC. It implements IFC2x3 and IFC4 and allows to develop SW agnostic to IFC version and file format.">
    <meta name="author" content="xBIM Team">
	<meta name="keywords" content="xBIM,BIM,C#,CSharp,NET,OpenBIM,IFC,buildingSMART,standard,documentation,examples">
	<meta name="google-site-verification" content="0uIEEP0H5QWrL3gUPIdxOhMzGT0ZArO6rdpj9TOeeEQ" />

    <link rel="icon" href="../img/favicon.ico">

    <title>Basic Model Operations</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="../css/codestyles.css" rel="stylesheet">
    <link href="../css/site.css" rel="stylesheet">

    <script src="../js/jquery.min.js"></script>

	<!-- Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-51899259-2', 'auto');
		ga('send', 'pageview');
	</script>

	<!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
	<script type="application/ld+json">
	{
	  "@context" : "http://schema.org",
	  "@type" : "SoftwareApplication",
	  "name" : "xBIM Toolkit",
	  "image" : "https://xbimteam.github.io/img/xbim.png",
	  "url" : "https://xbimteam.github.io/",
	  "author" : {
	    "@type" : "Person",
	    "name" : "prof. Steve Lockley"
	  },
	  "applicationCategory" : "BIM",
	  "downloadUrl" : "https://www.nuget.org/packages?q=xbim",
	  "softwareVersion" : "4.0"
	}
	</script>
  </head>
<!-- NAVBAR
================================================== -->
  <body>

    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html"><img alt="logo" src="../img/logos/xbim_white_h35.png"/></a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          		   
	<ul class="nav navbar-nav">
		
        <li>
			<a href="../quick-start.html">Quick Start</a>
		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../examples/examples-list.html">Examples list</a>
		</li>
		<li role="separator" class="group-divider">Basic </li>
        <li class="active">
			<a href="../examples/basic-model-operations.html">Basic Model Operations</a>
		</li>
		
        <li>
			<a href="../examples/watch-the-log.html">Watch the log!</a>
		</li>
		
        <li>
			<a href="../examples/proper-wall-in-3d.html">Proper Wall in 3D</a>
		</li>
		
        <li>
			<a href="../examples/step-to-xml-and-back-again.html">STEP to XML and Back Again</a>
		</li>
		
        <li>
			<a href="../examples/creating-wexbim-file.html">Creating wexBIM file</a>
		</li>
		
        <li>
			<a href="../examples/using-linq-for-optimal-performance.html">Using LINQ for Optimal Performance</a>
		</li>
		
        <li>
			<a href="../examples/excel-space-report-from-ifc.html">Excel Space Report from IFC</a>
		</li>
		
        <li>
			<a href="../examples/spatial-hierarchy.html">Spatial hierarchy</a>
		</li>
		<li role="separator" class="group-divider">Advanced </li>
		
        <li>
			<a href="../examples/federating-models.html">Federating Models</a>
		</li>
		
        <li>
			<a href="../examples/insert-copy-function.html">Insert Copy Function</a>
		</li>
		
        <li>
			<a href="../examples/change-log-creation.html">Change Log Creation</a>
		</li>
		<li role="separator" class="group-divider">Downloads </li>
		
        <li>
			<a href="../examples/xbimxplorer.html">XbimXplorer</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">xBIM 4 <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../xbim-4/fast-upgrade-track.html">Fast Upgrade Track</a>
		</li>
		
        <li>
			<a href="../xbim-4/project-status.html">Project Status</a>
		</li>
		
        <li>
			<a href="../xbim-4/xbim-4-release-notes.html">xBIM 4 Release Notes</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Research <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../research/history.html">History</a>
		</li>
		
        <li>
			<a href="../research/ifc2x3-test-harness.html">Ifc2X3 Test Harness</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Downloads <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../downloads/xbimxplorer.html">XbimXplorer</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">License <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../license/license.html">License</a>
		</li>
		
        <li>
			<a href="../license/third-party-licenses.html">Third Party Licenses</a>
		</li>
    </ul>

		</li>
    </ul>

        </div><!--/.nav-collapse -->
      </div>
    </nav>

	<div class="container">
	<h1>Basic model operations</h1>

<p>To get started the easiest way to get xBIM into your project is to use <a target="_blank" href="https://www.nuget.org/packages?q=xbim">NuGet</a>. To do anything you want with the data you only need 
<a target="_blank" href="https://www.nuget.org/packages/Xbim.Essentials/">xBIM Essentials</a>. If you need anything to do with geometry (like visualization) you will also need 
<a target="_blank" href="https://www.nuget.org/packages/Xbim.Geometry/">xBIM Geometry Engine</a>. There are many years of development behind xBIM and both these packages are mature and pretty much stable.</p>

<p>Now it's probably time to have a look at some very basic code examples representing how xBIM can be used. We will present four basic functions of persistent storage well known as 
<a target="_blank" href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> (Create, Retrieve, Update and Delete). Following examples usually work with IFC4 but you can also do the same
with IFC2x3. Actually most of the code is IFC version agnostic as it uses IFC4 interfaces which work for IFC2x3 as well. Sample data used to develop these examples can be downloaded
<a href="../data/SampleHouse.zip">here</a>.</p>

<h2>Create</h2>

<p>Following example will create simple IFC model without any geometry. As you can see <code>IfcStore</code> takes a configuration object <code>XbimEditorCredentials</code> representing
current application and user and uses it to maintain <code>OwnerHistory</code> of root entities. This is a requirement and
makes it easier to handle one of the many aspects needed to create compliant IFC models. This IFC doesn't define any <a target="_blank" href="http://www.buildingsmart-tech.org/specifications/ifc-view-definition">Model View Definition (MVD)</a>
so there are no additional restrictions apart from <code>WHERE</code> rules and required properties. You should always set editor credentials and fill it in with initials of your application
and your current user.</p>

<div class="csharp"><pre><code><span class="keyword">var</span> editor = <span class="keyword">new</span> <span class="type">XbimEditorCredentials</span>
{
    ApplicationDevelopersName = <span class="string">&quot;xBIM Team&quot;</span>,
    ApplicationFullName = <span class="string">&quot;xBIM Toolkit&quot;</span>,
    ApplicationIdentifier = <span class="string">&quot;xBIM&quot;</span>,
    ApplicationVersion = <span class="string">&quot;4.0&quot;</span>,
    EditorsFamilyName = <span class="string">&quot;Santini Aichel&quot;</span>,
    EditorsGivenName = <span class="string">&quot;Johann Blasius&quot;</span>,
    EditorsOrganisationName = <span class="string">&quot;Independent Architecture&quot;</span>
};
</code></pre></div>

<p>All implementations of <code>IModel</code> in xBIM are <code>IDisposable</code> so you should always use them inside of <code>using</code> statement like this</p>

<div class="csharp"><pre><code><span class="keyword">using</span> (<span class="keyword">var</span> model = <span class="type">IfcStore</span>.Create(editor, <span class="type">IfcSchemaVersion</span>.Ifc4, <span class="type">XbimStoreType</span>.InMemoryModel))
{
    <span class="comment">//...do something with the model</span>
}
</code></pre></div>

<p>If you are going to create or modify anything in the model you have to use transactions. These should also be used inside of <code>using</code> statement
so they have a proper scope for eventual roll-back operation in case something happens. You have to commit transaction explicitly to keep the changes.
Transactions can't be nested so there has always be just one transaction at the time.</p>

<div class="csharp"><pre><code><span class="keyword">using</span> (<span class="keyword">var</span> txn = model.BeginTransaction(<span class="string">&quot;Hello Wall&quot;</span>))
{
    <span class="comment">//....do something in the scope of this transaction</span>
    txn.Commit()
}
</code></pre></div>

<p>All operations related to entities are accessible through <code>IModel.Instances</code>. That is your point of access to get, change and create new
entities in the model. To create any new object you use this templated function. You always have to specify a non-abstract type to create. This is
built in xBIM in a way where you get a compile time error if you don't. 
Every model is schema specific so it is either IFC2x3 or IFC4 or other specific schema. <code>IfcStore</code> makes it easier because it can open both IFC versions 
and will tell you what it is but when you want to create data make sure you don't mess up your <code>using</code> statements. If you try to create IFC4 entity
with model initialized to IFC2x3 it will throw a runtime exception. </p>

<div class="csharp"><pre><code><span class="keyword">var</span> newWall = mode.Instances.New&lt;<span class="type">IfcWall</span>&gt;();
</code></pre></div>

<p>It isn't possible to create new entities in any other way than with this function. You will see in the code above that this function takes optional 
typed object initializer to set up values of the object. It is not necessary to use them but I personally like it because I can see the structure of
the resulting entity.</p>

<p>Using all these basic pieces we can build the first wall.
This wall doesn't have any geometry so most of IFC viewers won't show you anything. But this is just a basic example. Here is the complete code:</p>

<div class="csharp"><pre><code><span class="keyword">var</span> editor = <span class="keyword">new</span> <span class="type">XbimEditorCredentials</span>
{
    ApplicationDevelopersName = <span class="string">&quot;xBIM Team&quot;</span>,
    ApplicationFullName = <span class="string">&quot;xBIM Toolkit&quot;</span>,
    ApplicationIdentifier = <span class="string">&quot;xBIM&quot;</span>,
    ApplicationVersion = <span class="string">&quot;4.0&quot;</span>,
    EditorsFamilyName = <span class="string">&quot;Santini Aichel&quot;</span>,
    EditorsGivenName = <span class="string">&quot;Johann Blasius&quot;</span>,
    EditorsOrganisationName = <span class="string">&quot;Independent Architecture&quot;</span>
};
<span class="keyword">using</span> (<span class="keyword">var</span> model = <span class="type">IfcStore</span>.Create(editor, <span class="type">IfcSchemaVersion</span>.Ifc4, <span class="type">XbimStoreType</span>.InMemoryModel))
{
    <span class="keyword">using</span> (<span class="keyword">var</span> txn = model.BeginTransaction(<span class="string">&quot;Hello Wall&quot;</span>))
    {
        <span class="comment">//there should always be one project in the model</span>
        <span class="keyword">var</span> project = model.Instances.New&lt;<span class="type">IfcProject</span>&gt;(p =&gt; p.Name = <span class="string">&quot;Basic Creation&quot;</span>);
        <span class="comment">//our shortcut to define basic default units</span>
        project.Initialize(<span class="type">ProjectUnits</span>.SIUnitsUK);

        <span class="comment">//create simple object and use lambda initializer to set the name</span>
        <span class="keyword">var</span> wall = model.Instances.New&lt;<span class="type">IfcWall</span>&gt;(w =&gt; w.Name = <span class="string">&quot;The very first wall&quot;</span>);

        <span class="comment">//set a few basic properties</span>
        model.Instances.New&lt;<span class="type">IfcRelDefinesByProperties</span>&gt;(rel =&gt; {
            rel.RelatedObjects.Add(wall);
            rel.RelatingPropertyDefinition = model.Instances.New&lt;<span class="type">IfcPropertySet</span>&gt;(pset =&gt; {
                pset.Name = <span class="string">&quot;Basic set of properties&quot;</span>;
                pset.HasProperties.AddRange(<span class="keyword">new</span>[] {
                    model.Instances.New&lt;<span class="type">IfcPropertySingleValue</span>&gt;(p =&gt; 
                    {
                        p.Name = <span class="string">&quot;Text property&quot;</span>;
                        p.NominalValue = <span class="keyword">new</span> IfcText(<span class="string">&quot;Any arbitrary text you like&quot;</span>);
                    }),
                    model.Instances.New&lt;<span class="type">IfcPropertySingleValue</span>&gt;(p =&gt; 
                    {
                        p.Name = <span class="string">&quot;Length property&quot;</span>;
                        p.NominalValue = <span class="keyword">new</span> IfcLengthMeasure(56.0);
                    }),
                    model.Instances.New&lt;<span class="type">IfcPropertySingleValue</span>&gt;(p =&gt; 
                    {
                        p.Name = <span class="string">&quot;Number property&quot;</span>;
                        p.NominalValue = <span class="keyword">new</span> IfcNumericMeasure(789.2);
                    }),
                    model.Instances.New&lt;<span class="type">IfcPropertySingleValue</span>&gt;(p =&gt; 
                    {
                        p.Name = <span class="string">&quot;Logical property&quot;</span>;
                        p.NominalValue = <span class="keyword">new</span> IfcLogical(<span class="keyword">true</span>);
                    })
                });
            });
        });

        txn.Commit();
    }
    model.SaveAs(<span class="string">&quot;BasicWall.ifc&quot;</span>);
}
</code></pre></div>

<p>Resulting simple IFC will look like this:</p>

<div class="step"><pre><code>ISO-10303-21;
HEADER;
FILE_DESCRIPTION ((<span class="string">&#39;&#39;</span>), <span class="string">&#39;2;1&#39;</span>);
FILE_NAME (<span class="string">&#39;&#39;</span>, <span class="string">&#39;2016-10-27T13:14:43&#39;</span>, (<span class="string">&#39;&#39;</span>), (<span class="string">&#39;&#39;</span>), <span class="string">&#39;Xbim File Processor version 3.2.0.0&#39;</span>, <span class="string">&#39;Xbim version 3.2.0.0&#39;</span>, <span class="string">&#39;&#39;</span>);
FILE_SCHEMA ((<span class="string">&#39;IFC4&#39;</span>));
ENDSEC;
DATA;
<span class="number">#1</span>=<span class="type">IFCPROJECT</span>(<span class="string">&#39;2t0OftVsP8UBH3rtAB$yJv&#39;</span>,<span class="number">#2</span>,<span class="string">&#39;Basic Creation&#39;</span>,$,$,$,$,(<span class="number">#20</span>,<span class="number">#23</span>),<span class="number">#8</span>);
<span class="number">#2</span>=<span class="type">IFCOWNERHISTORY</span>(<span class="number">#5</span>,<span class="number">#6</span>,$,.ADDED.,$,$,$,0);
<span class="number">#3</span>=<span class="type">IFCPERSON</span>($,<span class="string">&#39;Santini Aichel&#39;</span>,<span class="string">&#39;Johann Blasius&#39;</span>,$,$,$,$,$);
<span class="number">#4</span>=<span class="type">IFCORGANIZATION</span>($,<span class="string">&#39;Independent Architecture&#39;</span>,$,$,$);
<span class="number">#5</span>=<span class="type">IFCPERSONANDORGANIZATION</span>(<span class="number">#3</span>,<span class="number">#4</span>,$);
<span class="number">#7</span>=<span class="type">IFCORGANIZATION</span>($,<span class="string">&#39;xBIM Team&#39;</span>,$,$,$);
<span class="number">#6</span>=<span class="type">IFCAPPLICATION</span>(<span class="number">#7</span>,$,<span class="string">&#39;xBIM Toolkit&#39;</span>,<span class="string">&#39;xBIM&#39;</span>);
<span class="number">#8</span>=<span class="type">IFCUNITASSIGNMENT</span>((<span class="number">#9</span>,<span class="number">#10</span>,<span class="number">#11</span>,<span class="number">#12</span>,<span class="number">#13</span>,<span class="number">#14</span>,<span class="number">#15</span>,<span class="number">#16</span>,<span class="number">#17</span>));
<span class="number">#9</span>=<span class="type">IFCSIUNIT</span>(*,.LENGTHUNIT.,.MILLI.,.METRE.);
<span class="number">#10</span>=<span class="type">IFCSIUNIT</span>(*,.AREAUNIT.,$,.SQUARE_METRE.);
<span class="number">#11</span>=<span class="type">IFCSIUNIT</span>(*,.VOLUMEUNIT.,$,.CUBIC_METRE.);
<span class="number">#12</span>=<span class="type">IFCSIUNIT</span>(*,.SOLIDANGLEUNIT.,$,.STERADIAN.);
<span class="number">#13</span>=<span class="type">IFCSIUNIT</span>(*,.PLANEANGLEUNIT.,$,.RADIAN.);
<span class="number">#14</span>=<span class="type">IFCSIUNIT</span>(*,.MASSUNIT.,$,.GRAM.);
<span class="number">#15</span>=<span class="type">IFCSIUNIT</span>(*,.TIMEUNIT.,$,.SECOND.);
<span class="number">#16</span>=<span class="type">IFCSIUNIT</span>(*,.THERMODYNAMICTEMPERATUREUNIT.,$,.DEGREE_CELSIUS.);
<span class="number">#17</span>=<span class="type">IFCSIUNIT</span>(*,.LUMINOUSINTENSITYUNIT.,$,.LUMEN.);
<span class="number">#18</span>=<span class="type">IFCCARTESIANPOINT</span>((0.,0.,0.));
<span class="number">#19</span>=<span class="type">IFCAXIS</span>2PLACEMENT3D(<span class="number">#18</span>,$,$);
<span class="number">#20</span>=<span class="type">IFCGEOMETRICREPRESENTATIONCONTEXT</span>(<span class="string">&#39;Building Model&#39;</span>,<span class="string">&#39;Model&#39;</span>,3,1.E-05,<span class="number">#19</span>,$);
<span class="number">#21</span>=<span class="type">IFCCARTESIANPOINT</span>((0.,0.));
<span class="number">#22</span>=<span class="type">IFCAXIS</span>2PLACEMENT2D(<span class="number">#21</span>,$);
<span class="number">#23</span>=<span class="type">IFCGEOMETRICREPRESENTATIONCONTEXT</span>(<span class="string">&#39;Building Plan View&#39;</span>,<span class="string">&#39;Plan&#39;</span>,2,1.E-05,<span class="number">#22</span>,$);
<span class="number">#24</span>=<span class="type">IFCWALL</span>(<span class="string">&#39;1YTVCro6L0$OJQL2X7wICY&#39;</span>,<span class="number">#2</span>,<span class="string">&#39;The very first wall&#39;</span>,$,$,$,$,$,$);
<span class="number">#27</span>=<span class="type">IFCPROPERTYSINGLEVALUE</span>(<span class="string">&#39;Text property&#39;</span>,$,<span class="type">IFCTEXT</span>(<span class="string">&#39;Any arbitrary text you like&#39;</span>),$);
<span class="number">#28</span>=<span class="type">IFCPROPERTYSINGLEVALUE</span>(<span class="string">&#39;Length property&#39;</span>,$,<span class="type">IFCLENGTHMEASURE</span>(56.),$);
<span class="number">#29</span>=<span class="type">IFCPROPERTYSINGLEVALUE</span>(<span class="string">&#39;Number property&#39;</span>,$,<span class="type">IFCNUMERICMEASURE</span>(789.2),$);
<span class="number">#30</span>=<span class="type">IFCPROPERTYSINGLEVALUE</span>(<span class="string">&#39;Logical property&#39;</span>,$,<span class="type">IFCLOGICAL</span>(.T.),$);
<span class="number">#26</span>=<span class="type">IFCPROPERTYSET</span>(<span class="string">&#39;2u_olyjv13oRt0GvSVSxHS&#39;</span>,<span class="number">#2</span>,<span class="string">&#39;Basic set of properties&#39;</span>,$,(<span class="number">#27</span>,<span class="number">#28</span>,<span class="number">#29</span>,<span class="number">#30</span>));
<span class="number">#25</span>=<span class="type">IFCRELDEFINESBYPROPERTIES</span>(<span class="string">&#39;3I5GuvWn95PRXcxoFGfJAL&#39;</span>,<span class="number">#2</span>,$,$,(<span class="number">#24</span>),<span class="number">#26</span>);
ENDSEC;
END-ISO-10303-21;
</code></pre></div>

<h2>Retrieve</h2>

<p>Retrieving data from the model is very easy and it uses <code>IModel.Instances</code> again to access all entities we need.</p>

<div class="csharp"><pre><code><span class="keyword">var</span> firstWall = mode.Instances.FirtsOrDefault&lt;<span class="type">IfcWall</span>&gt;();
<span class="keyword">var</span> allWalls = model.Instances.OfType&lt;<span class="type">IfcWall</span>&gt;();
<span class="keyword">var</span> specificWall = model.Instances.Where&lt;<span class="type">IfcWall</span>&gt;(w =&gt; w.Name == <span class="string">&quot;Brick wall&quot;</span>);
</code></pre></div>

<p>You can see that all these functions are templated so they use type of the object as the first level filter. If you know the type you want you should
always specify it to increase a performance. For all search queries you can also use interfaces to retrieve entities. We have implemented <strong>IFC4 interfaces
on IFC2x3 entities</strong> which means you can query IFC2x3 and IFC4 with a <strong>single codebase</strong>. </p>

<p>Following example only needs these usings:</p>

<div class="csharp"><pre><code><span class="keyword">using</span> <span class="type">System</span>;
<span class="keyword">using</span> <span class="type">System</span>.Linq;
<span class="keyword">using</span> <span class="type">Xbim</span>.Ifc;
<span class="keyword">using</span> <span class="type">Xbim</span>.Ifc4.Interfaces;
</code></pre></div>

<p>If you are interested in the structure of the entities we recommend you to have a look at IFC documentation <a target="_blank" href="http://www.buildingsmart-tech.org/ifc/">here</a>.</p>

<div class="csharp"><pre><code><span class="keyword">const</span> <span class="keyword">string</span> fileName = <span class="string">&quot;SampleHouse.ifc&quot;</span>;
<span class="keyword">using</span> (<span class="keyword">var</span> model = <span class="type">IfcStore</span>.Open(fileName))
{
    <span class="comment">//get all doors in the model (using IFC4 interface of IfcDoor this will work both for IFC2x3 and IFC4)</span>
    <span class="keyword">var</span> allDoors = model.Instances.OfType&lt;<span class="type">IIfcDoor</span>&gt;();

    <span class="comment">//get only doors with defined IIfcTypeObject</span>
    <span class="keyword">var</span> someDoors = model.Instances.Where&lt;<span class="type">IIfcDoor</span>&gt;(d =&gt; d.IsTypedBy.Any());

    <span class="comment">//get one single door </span>
    <span class="keyword">var</span> id = <span class="string">&quot;2AswZfru1AdAiKfEdrNPnu&quot;</span>;
    <span class="keyword">var</span> theDoor = model.Instances.FirstOrDefault&lt;<span class="type">IIfcDoor</span>&gt;(d =&gt; d.GlobalId == id);
    <span class="type">Console</span>.WriteLine($<span class="string">&quot;Door ID: {theDoor.GlobalId}, Name: {theDoor.Name}&quot;</span>);

    <span class="comment">//get all single-value properties of the door</span>
    <span class="keyword">var</span> properties = theDoor.IsDefinedBy
        .Where(r =&gt; r.RelatingPropertyDefinition <span class="keyword">is</span> <span class="type">IIfcPropertySet</span>)
        .SelectMany(r =&gt; ((<span class="type">IIfcPropertySet</span>)r.RelatingPropertyDefinition).HasProperties)
        .OfType&lt;<span class="type">IIfcPropertySingleValue</span>&gt;();
    <span class="keyword">foreach</span> (<span class="keyword">var</span> property <span class="keyword">in</span> properties)
        <span class="type">Console</span>.WriteLine($<span class="string">&quot;Property: {property.Name}, Value: {property.NominalValue}&quot;</span>);
}
</code></pre></div>

<p>This will write to console:</p>

<pre><code>Door ID: 3cUkl32yn9qRSPvBJVyWYp, Name: Doors_ExtDbl_Flush:1810x2110mm:285860
Property: IsExternal, Value: true
Property: Reference, Value: 1810x2110mm
Property: Level, Value: Level: Ground Floor
Property: Sill Height, Value: 0
Property: Area, Value: 4.9462127188431
Property: Volume, Value: 0.193819981582386
Property: Mark, Value: 1
Property: Category, Value: Doors
Property: Family, Value: Doors_ExtDbl_Flush: 1810x2110mm
Property: Family and Type, Value: Doors_ExtDbl_Flush: 1810x2110mm
Property: Head Height, Value: 2110
Property: Host Id, Value: Basic Wall: Wall-Ext_102Bwk-75Ins-100LBlk-12P
Property: Type, Value: Doors_ExtDbl_Flush: 1810x2110mm
Property: Type Id, Value: Doors_ExtDbl_Flush: 1810x2110mm
Property: Phase Created, Value: New Construction
</code></pre>

<h2>Update</h2>

<p>Update is similar to the previous two. Notice the transaction has to be open and should be enclosed in <code>using</code> statements
or model will throw an exception at the moment you create or change any object.</p>

<div class="csharp"><pre><code><span class="keyword">const</span> <span class="keyword">string</span> fileName = <span class="string">&quot;SampleHouse.ifc&quot;</span>;
<span class="keyword">var</span> editor = <span class="keyword">new</span> <span class="type">XbimEditorCredentials</span>
{
    ApplicationDevelopersName = <span class="string">&quot;xBIM Team&quot;</span>,
    ApplicationFullName = <span class="string">&quot;xBIM Toolkit&quot;</span>,
    ApplicationIdentifier = <span class="string">&quot;xBIM&quot;</span>,
    ApplicationVersion = <span class="string">&quot;4.0&quot;</span>,
    EditorsFamilyName = <span class="string">&quot;Santini Aichel&quot;</span>,
    EditorsGivenName = <span class="string">&quot;Johann Blasius&quot;</span>,
    EditorsOrganisationName = <span class="string">&quot;Independent Architecture&quot;</span>
};

<span class="keyword">using</span> (<span class="keyword">var</span> model = <span class="type">IfcStore</span>.Open(fileName, editor, <span class="keyword">true</span>))
{
    <span class="comment">//get existing door from the model</span>
    <span class="keyword">var</span> id = <span class="string">&quot;3cUkl32yn9qRSPvBJVyWYp&quot;</span>;
    <span class="keyword">var</span> theDoor = model.Instances.FirstOrDefault&lt;<span class="type">IfcDoor</span>&gt;(d =&gt; d.GlobalId == id);

    <span class="comment">//open transaction for changes</span>
    <span class="keyword">using</span> (<span class="keyword">var</span> txn = model.BeginTransaction(<span class="string">&quot;Doors modification&quot;</span>))
    {
        <span class="comment">//create new property set with two properties</span>
        <span class="keyword">var</span> pSetRel = model.Instances.New&lt;<span class="type">IfcRelDefinesByProperties</span>&gt;(r =&gt;
        {
            r.GlobalId = <span class="type">Guid</span>.NewGuid();
            r.RelatingPropertyDefinition = model.Instances.New&lt;<span class="type">IfcPropertySet</span>&gt;(pSet =&gt;
            {
                pSet.Name = <span class="string">&quot;New property set&quot;</span>;
                <span class="comment">//all collections are always initialized</span>
                pSet.HasProperties.Add(model.Instances.New&lt;<span class="type">IfcPropertySingleValue</span>&gt;(p =&gt;
                {
                    p.Name = <span class="string">&quot;First property&quot;</span>;
                    p.NominalValue = <span class="keyword">new</span> IfcLabel(<span class="string">&quot;First value&quot;</span>);
                }));
                pSet.HasProperties.Add(model.Instances.New&lt;<span class="type">IfcPropertySingleValue</span>&gt;(p =&gt;
                {
                    p.Name = <span class="string">&quot;Second property&quot;</span>;
                    p.NominalValue = <span class="keyword">new</span> IfcLengthMeasure(156.5);
                }));
            });
        });

        <span class="comment">//change the name of the door</span>
        theDoor.Name += <span class="string">&quot;_checked&quot;</span>;
        <span class="comment">//add properties to the door</span>
        pSetRel.RelatedObjects.Add(theDoor);

        <span class="comment">//commit changes</span>
        txn.Commit();
    }

}
</code></pre></div>

<h2>Delete</h2>

<p>Delete is kind of the most complicated operation with the model. First thing to know is that it is only completely implemented in MemoryModel (October 2016).
The reason why this is complicated is that IFC data model is very complex and it isn't hierarchy or directional graph. So our implementation of delete only makes sure
that no object in the model is referencing the object you delete so the model stays consistent. But it doesn't automatically delete any objects referenced from it or 
referring to it. There are choices to be made by programmer or user. However, low level infrastructure for delete can be used very simply:</p>

<div class="csharp"><pre><code><span class="keyword">using</span> (<span class="keyword">var</span> model = <span class="type">IfcStore</span>.Open(fileName))
{
    <span class="comment">//get existing door from the model</span>
    <span class="keyword">var</span> id = <span class="string">&quot;3cUkl32yn9qRSPvBJVyWYp&quot;</span>;  <span class="comment">//use some existing ID from your model</span>
    <span class="keyword">var</span> theDoor = model.Instances.FirstOrDefault&lt;<span class="type">IIfcDoor</span>&gt;(d =&gt; d.GlobalId == id);

    <span class="comment">//open transaction for changes</span>
    <span class="keyword">using</span> (<span class="keyword">var</span> txn = model.BeginTransaction(<span class="string">&quot;Delete the door&quot;</span>))
    {
        <span class="comment">//delete the door</span>
        model.Delete(theDoor);
        <span class="comment">//commit changes</span>
        txn.Commit();
    }

}
</code></pre></div>

    </div>
    

	<div class="brands-container">
	<p><small>Some of the companies using xBIM Toolkit:</small></p>
		<img src="../img/logos/northumbria_logo_gray.png" class="brand"/>
		<img src="../img/logos/viewpoint_logo_gray.png" class="brand"/>
		<img src="../img/logos/welplan_logo_gray.png" class="brand"/>
		<img src="../img/logos/nbs_logo_gray.png" class="brand"/>
		<img src="../img/logos/bim_academy_logo_gray.png" class="brand"/>
		<img src="../img/logos/di5_logo_gray.png" class="brand"/>
		<img src="../img/logos/SEMA_logo_gray.png" class="brand"/>
	</div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
