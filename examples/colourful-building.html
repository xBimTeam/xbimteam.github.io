<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="xbim toolkit is an Open Source toolkit for IFC and BIM. You can use it to do anything with IFC. It implements IFC2x3 and IFC4 and allows to develop SW agnostic to IFC version and file format.">
    <meta name="author" content="xbim ltd.">
	<meta name="keywords" content="xbim,BIM,C#,CSharp,NET,OpenBIM,IFC,buildingSMART,standard,documentation,examples">
	<meta name="google-site-verification" content="0uIEEP0H5QWrL3gUPIdxOhMzGT0ZArO6rdpj9TOeeEQ" />

    <link rel="icon" href="../img/favicon.ico">

    <title>Colourful Building</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- Google fonts -->
	<link target="_blank" href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;700&family=Roboto:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet"> 

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="../css/codestyles.css" rel="stylesheet">
    <link href="../css/site.css" rel="stylesheet">

    <script src="../js/jquery.min.js"></script>

	<!-- Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-51899259-2', 'auto');
		ga('send', 'pageview');
	</script>

	<!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
	<script type="application/ld+json">
	{
	  "@context" : "http://schema.org",
	  "@type" : "SoftwareApplication",
	  "name" : "xbim toolkit",
	  "image" : "https://docs.xbim.net../img/xBim_toolkit_logo.png",
	  "url" : "https://docs.xbim.net/",
	  "author" : {
	    "@type" : "Person",
	    "name" : "prof. Steve Lockley"
	  },
	  "applicationCategory" : "BIM",
	  "downloadUrl" : "https://www.nuget.org/packages?q=xbim",
	  "softwareVersion" : "4.0"
	}
	</script>
  </head>
<!-- NAVBAR
================================================== -->
  <body>

    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html"><img alt="logo" src="../img/xBim_toolkit_logo.png"/></a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          		   
	<ul class="nav navbar-nav">
		
        <li>
			<a href="../quick-start.html">Quick Start</a>
		</li>
		
        <li>
			<a href="../docs.html">Docs</a>
		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../examples/examples-list.html">Examples list</a>
		</li>
		<li role="separator" class="group-divider">Basic </li>
		
        <li>
			<a href="../examples/basic-model-operations.html">Basic Model Operations</a>
		</li>
		
        <li>
			<a href="../examples/watch-the-log.html">Watch the log!</a>
		</li>
		
        <li>
			<a href="../examples/proper-wall-in-3d.html">Proper Wall in 3D</a>
		</li>
		
        <li>
			<a href="../examples/step-to-xml-and-back-again.html">STEP to XML and Back Again</a>
		</li>
		
        <li>
			<a href="../examples/creating-wexbim-file.html">Creating wexBIM file</a>
		</li>
		
        <li>
			<a href="../examples/using-linq-for-optimal-performance.html">Using LINQ for Optimal Performance</a>
		</li>
		
        <li>
			<a href="../examples/excel-space-report-from-ifc.html">Excel Space Report from IFC</a>
		</li>
		
        <li>
			<a href="../examples/spatial-hierarchy.html">Spatial hierarchy</a>
		</li>
		<li role="separator" class="group-divider">Advanced </li>
		
        <li>
			<a href="../examples/federating-models.html">Federating Models</a>
		</li>
		
        <li>
			<a href="../examples/insert-copy-function.html">Insert Copy Function</a>
		</li>
		
        <li>
			<a href="../examples/change-log-creation.html">Change Log Creation</a>
		</li>
		<li role="separator" class="group-divider">Downloads </li>
		
        <li>
			<a href="../examples/xbimxplorer.html">XbimXplorer</a>
		</li>
		<li role="separator" class="group-divider">Web UI  </li>
		
        <li>
			<a href="../examples/hello-building.html">Hello Building</a>
		</li>
		
        <li>
			<a href="../examples/safe-hello-building.html">Safe Hello Building</a>
		</li>
		
        <li>
			<a href="../examples/eventful-building.html">Eventful Building</a>
		</li>
		
        <li>
			<a href="../examples/building-seen-from-everywhere.html">Building Seen from Everywhere</a>
		</li>
        <li class="active">
			<a href="../examples/colourful-building.html">Colourful Building</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Release notes <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../release-notes/fast-upgrade-track.html">Fast Upgrade Track</a>
		</li>
		
        <li>
			<a href="../release-notes/xbim-4-release-notes.html">xBIM 4 Release Notes</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Research <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../research/history.html">History</a>
		</li>
		
        <li>
			<a href="../research/how-to-reference.html">How to reference</a>
		</li>
		
        <li>
			<a href="../research/ifc2x3-test-harness.html">Ifc2X3 Test Harness</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Downloads <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../downloads/xbimxplorer.html">XbimXplorer</a>
		</li>
    </ul>

		</li>
		
        <li>
			<a href="../cloud.html">Cloud</a>
		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">License <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../license/license.html">License</a>
		</li>
		
        <li>
			<a href="../license/third-party-licenses.html">Third Party Licenses</a>
		</li>
    </ul>

		</li>
    </ul>

        </div><!--/.nav-collapse -->
      </div>
    </nav>

	<div class="container">
	<h1>Colourful Building</h1>

<p>Live example <a href="5_Colourful_building.live.html">here</a>.</p>

<p>This tutorial will focus on colour presentation of the model. As you have noticed models have a sensible graphical representation
by default. This is taken from IFC model to it should look about the same in all the tools and it should look the same as in your
or your user's authoring environment. But it is important to be able to chenge this representation sometimes to report some kind
of results to the user (classification, error reporting, clash detection etc.). This will be covered in this short tutorial. You can have 
a look on full sample demo <a href="5_Colourful_building.live.html">here</a>.</p>

<p>I'll use ugly obtrusive code with javascript functions defined in <em>onclick</em> attributes of HTML elements. This is not the right practise
but I've done it this way for the sake of clarity and simplicity. You are ancouraged to follow 
<a target="_blank" href="http://www.w3.org/wiki/The_principles_of_unobtrusive_JavaScript">these guidlines</a> to write sustainable
and clear web applications.</p>

<p>First of all it is necessary to define your styles. There is simple function <code>defineStyle()</code> to do that.
You can define up to 224 styles. Because I don't have any results to show let's make it random. We'll define new colour for every
product type in the following code:</p>

<div class="html"><pre><code><span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">button</span> <span class="htmlAttributeName">onclick</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;Recolour()&quot;</span><span class="htmlTagDelimiter">&gt;</span>Recolour by type<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">button</span><span class="htmlTagDelimiter">&gt;</span>
<span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">button</span> <span class="htmlAttributeName">onclick</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;if (viewer) viewer.resetStyles();&quot;</span><span class="htmlTagDelimiter">&gt;</span>Reset styles<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">button</span><span class="htmlTagDelimiter">&gt;</span>
<span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">script</span> <span class="htmlAttributeName">type</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;text/javascript&quot;</span><span class="htmlTagDelimiter">&gt;</span>
    <span class="keyword">function</span> Recolour() {
        <span class="keyword">if</span> (!viewer) <span class="keyword">return</span>;
        <span class="keyword">var</span> index = 0;
        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> ProductType) {
            <span class="keyword">var</span> type = ProductType[i];
            <span class="keyword">if</span> (!/^[0-9]+$/.test(type)) {
                <span class="keyword">continue</span>;
            }
            <span class="keyword">var</span> colour = [Math.random() * 255, Math.random() * 255, Math.random() * 255, 255];
            viewer.defineStyle(index, colour);
            viewer.setStyle(index, type);
            index++;
        }
    };
<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">script</span><span class="htmlTagDelimiter">&gt;</span>
</code></pre></div>

<p>This is it. You can extend this example as you wish. Just define 0 - 224 colour styles and set them as an overlay style to product
or to type of products. If you want to reset styles to their default use <code>resetStyles()</code> function.</p>

<p>There is one more visual feature of the viewer and that is highlighting. You can think about it as a selection but it is not that
clever. It leaves all the eventual selection logic up to you. This is just a visual representation. It is hence ruther <em>state</em> than <em>style</em>.
You can use it exactly the same way as you did in the <a href="building-seen-from-everywhere.html">last tutorial</a>:</p>

<div class="html"><pre><code><span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">select</span> <span class="htmlAttributeName">id</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;cmbSelection&quot;</span><span class="htmlTagDelimiter">&gt;</span>
    <span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">option</span> <span class="htmlAttributeName">value</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;noAction&quot;</span><span class="htmlTagDelimiter">&gt;</span>No action<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">option</span><span class="htmlTagDelimiter">&gt;</span>
    <span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">option</span> <span class="htmlAttributeName">value</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;select&quot;</span><span class="htmlTagDelimiter">&gt;</span>Select<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">option</span><span class="htmlTagDelimiter">&gt;</span>
<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">select</span><span class="htmlTagDelimiter">&gt;</span>
<span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">button</span> <span class="htmlAttributeName">onclick</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;if (viewer) viewer.resetState()&quot;</span><span class="htmlTagDelimiter">&gt;</span>Reset<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">button</span><span class="htmlTagDelimiter">&gt;</span>
<span class="htmlTagDelimiter">&lt;</span><span class="htmlElementName">script</span> <span class="htmlAttributeName">type</span><span class="htmlOperator">=</span><span class="htmlAttributeValue">&quot;text/javascript&quot;</span><span class="htmlTagDelimiter">&gt;</span>
    <span class="keyword">function</span> initHighlighting() {
        viewer.on(<span class="string">&#39;pick&#39;</span>, <span class="keyword">function</span> (args) {
            <span class="keyword">var</span> cmb = document.getElementById(<span class="string">&#39;cmbSelection&#39;</span>);
            <span class="keyword">var</span> option = cmb.value;
            <span class="keyword">switch</span> (option) {
                <span class="keyword">case</span> <span class="string">&#39;select&#39;</span>:
                    viewer.setState(State.HIGHLIGHTED, [args.id]);
                    <span class="keyword">break</span>;
                <span class="keyword">case</span> <span class="string">&#39;hide&#39;</span>:
                    viewer.setState(State.HIDDEN, [args.id]);
                    <span class="keyword">break</span>;
                <span class="keyword">default</span>:
                    <span class="keyword">break</span>;
            }
        });
    };
<span class="htmlTagDelimiter">&lt;/</span><span class="htmlElementName">script</span><span class="htmlTagDelimiter">&gt;</span>
</code></pre></div>

<p>Nice feature of this approach is that highlighting is separated from alternative visual appearance. You can't have a product highlighted and
hidden at the same time but that makes a sense. Important thing is that you can show results of the analyses and do selection at the same time.
And if you discard selection you still have a valid results representation. You can generally combine <em>styles</em> and <em>states</em> in any way.</p>

    </div>
    

	<div class="brands-container">
	<p><small>Some of the companies using xbim toolkit:</small></p>
		<a target="_blank" href="https://www.xbim.net"><img style="height:65px;" src="../img/xBim_parent_logo_white.svg" class="brand" alt="xbim ltd."></a>
		<img src="../img/logos/northumbria_logo_gray.png" class="brand"/>
		<img src="../img/logos/viewpoint_logo_gray.png" class="brand"/>
		<img src="../img/logos/welplan_logo_gray.png" class="brand"/>
		<img src="../img/logos/nbs_logo_gray.png" class="brand"/>
		<img src="../img/logos/bim_academy_logo_gray.png" class="brand"/>
		<img src="../img/logos/di5_logo_gray.png" class="brand"/>
		<img src="../img/logos/SEMA_logo_gray.png" class="brand"/>
	</div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
