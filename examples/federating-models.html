<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="xbim toolkit is an Open Source toolkit for IFC and BIM. You can use it to do anything with IFC. It implements IFC2x3 and IFC4 and allows to develop SW agnostic to IFC version and file format.">
    <meta name="author" content="xbim ltd.">
	<meta name="keywords" content="xbim,BIM,C#,CSharp,NET,OpenBIM,IFC,buildingSMART,standard,documentation,examples">
	<meta name="google-site-verification" content="0uIEEP0H5QWrL3gUPIdxOhMzGT0ZArO6rdpj9TOeeEQ" />

    <link rel="icon" href="../img/favicon.ico">

    <title>Federating Models</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- Google fonts -->
	<link target="_blank" href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;700&family=Roboto:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet"> 

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="../css/codestyles.css" rel="stylesheet">
    <link href="../css/site.css" rel="stylesheet">

    <script src="../js/jquery.min.js"></script>

	<!-- Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-51899259-2', 'auto');
		ga('send', 'pageview');
	</script>

	<!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
	<script type="application/ld+json">
	{
	  "@context" : "http://schema.org",
	  "@type" : "SoftwareApplication",
	  "name" : "xbim toolkit",
	  "image" : "https://docs.xbim.net../img/xBim_toolkit_logo.png",
	  "url" : "https://docs.xbim.net/",
	  "author" : {
	    "@type" : "Person",
	    "name" : "prof. Steve Lockley"
	  },
	  "applicationCategory" : "BIM",
	  "downloadUrl" : "https://www.nuget.org/packages?q=xbim",
	  "softwareVersion" : "4.0"
	}
	</script>
  </head>
<!-- NAVBAR
================================================== -->
  <body>

    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html"><img alt="logo" src="../img/xBim_toolkit_logo.png"/></a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          		   
	<ul class="nav navbar-nav">
		
        <li>
			<a href="../quick-start.html">Quick Start</a>
		</li>
		
        <li>
			<a href="../docs.html">Docs</a>
		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../examples/examples-list.html">Examples list</a>
		</li>
		<li role="separator" class="group-divider">Basic </li>
		
        <li>
			<a href="../examples/basic-model-operations.html">Basic Model Operations</a>
		</li>
		
        <li>
			<a href="../examples/watch-the-log.html">Watch the log!</a>
		</li>
		
        <li>
			<a href="../examples/proper-wall-in-3d.html">Proper Wall in 3D</a>
		</li>
		
        <li>
			<a href="../examples/step-to-xml-and-back-again.html">STEP to XML and Back Again</a>
		</li>
		
        <li>
			<a href="../examples/creating-wexbim-file.html">Creating wexBIM file</a>
		</li>
		
        <li>
			<a href="../examples/using-linq-for-optimal-performance.html">Using LINQ for Optimal Performance</a>
		</li>
		
        <li>
			<a href="../examples/excel-space-report-from-ifc.html">Excel Space Report from IFC</a>
		</li>
		
        <li>
			<a href="../examples/spatial-hierarchy.html">Spatial hierarchy</a>
		</li>
		<li role="separator" class="group-divider">Advanced </li>
        <li class="active">
			<a href="../examples/federating-models.html">Federating Models</a>
		</li>
		
        <li>
			<a href="../examples/insert-copy-function.html">Insert Copy Function</a>
		</li>
		
        <li>
			<a href="../examples/change-log-creation.html">Change Log Creation</a>
		</li>
		<li role="separator" class="group-divider">Web UI  </li>
		
        <li>
			<a href="../examples/hello-building.html">Hello Building</a>
		</li>
		
        <li>
			<a href="../examples/safe-hello-building.html">Safe Hello Building</a>
		</li>
		
        <li>
			<a href="../examples/eventful-building.html">Eventful Building</a>
		</li>
		
        <li>
			<a href="../examples/building-seen-from-everywhere.html">Building Seen from Everywhere</a>
		</li>
		
        <li>
			<a href="../examples/colourful-building.html">Colourful Building</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Release notes <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../release-notes/fast-upgrade-track.html">Fast Upgrade Track</a>
		</li>
		
        <li>
			<a href="../release-notes/xbim-4-release-notes.html">xBIM 4 Release Notes</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Research <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../research/history.html">History</a>
		</li>
		
        <li>
			<a href="../research/how-to-reference.html">How to reference</a>
		</li>
		
        <li>
			<a href="../research/ifc2x3-test-harness.html">Ifc2X3 Test Harness</a>
		</li>
    </ul>

		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Downloads <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../downloads/xbimxplorer.html">XbimXplorer</a>
		</li>
    </ul>

		</li>
		
        <li>
			<a href="../cloud.html">Cloud</a>
		</li>
        <li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">License <span class="caret"></span></a>
			
	<ul class="dropdown-menu">
		
        <li>
			<a href="../license/license.html">License</a>
		</li>
		
        <li>
			<a href="../license/third-party-licenses.html">Third Party Licenses</a>
		</li>
    </ul>

		</li>
    </ul>

        </div><!--/.nav-collapse -->
      </div>
    </nav>

	<div class="container">
	<h1>Federation of multiple models</h1>

<ul>
<li>Overlaying multiple models to behave like a one</li>
<li>Uniform access to the data as if it was a single model</li>
<li>Read-only. To modify the content of the model you have to work with the specific model</li>
<li>Not constrained to a single schema (federate IFC2x3 + IFC4 → query it as IFC4 interfaces)</li>
<li>IFC federation can be stored as an IFC file (in IfcStore)</li>
</ul>

<div class="csharp"><pre><code><span class="keyword">using</span> <span class="type">System</span>;
<span class="keyword">using</span> <span class="type">Xbim</span>.Common.Step21;
<span class="keyword">using</span> <span class="type">Xbim</span>.Ifc;
<span class="keyword">using</span> <span class="type">Xbim</span>.Ifc4.Interfaces;

<span class="keyword">namespace</span> <span class="type">BasicExamples</span>
{
    <span class="keyword">public</span> <span class="keyword">class</span> <span class="type">FederationExample</span>
    {
        <span class="keyword">public</span> <span class="keyword">void</span> CreateFederation()
        {
            <span class="keyword">var</span> editor = <span class="keyword">new</span> <span class="type">XbimEditorCredentials</span>
            {
                ApplicationDevelopersName = <span class="string">&quot;You&quot;</span>,
                ApplicationFullName = <span class="string">&quot;Your app&quot;</span>,
                ApplicationIdentifier = <span class="string">&quot;Your app ID&quot;</span>,
                ApplicationVersion = <span class="string">&quot;4.0&quot;</span>,
                <span class="comment">//your user</span>
                EditorsFamilyName = <span class="string">&quot;Santini Aichel&quot;</span>,
                EditorsGivenName = <span class="string">&quot;Johann Blasius&quot;</span>,
                EditorsOrganisationName = <span class="string">&quot;Independent Architecture&quot;</span>
            };
            <span class="keyword">using</span> (<span class="keyword">var</span> federation = <span class="type">IfcStore</span>.Create(editor, <span class="type">IfcSchemaVersion</span>.Ifc4, <span class="type">XbimStoreType</span>.InMemoryModel))
            {

                federation.AddModelReference(<span class="string">&quot;SampleHouse.ifc&quot;</span>, <span class="string">&quot;Bob The Builder&quot;</span>, <span class="string">&quot;Original Constructor&quot;</span>); <span class="comment">//IFC4</span>
                federation.AddModelReference(<span class="string">&quot;SampleHouseExtension.ifc&quot;</span>, <span class="string">&quot;Tyna&quot;</span>, <span class="string">&quot;Extensions Builder&quot;</span>); <span class="comment">//IFC2x3</span>

                <span class="type">Console</span>.WriteLine($<span class="string">&quot;Model is federation: {federation.IsFederation}&quot;</span>);
                <span class="type">Console</span>.WriteLine($<span class="string">&quot;Number of overall entities: {federation.FederatedInstances.Count}&quot;</span>);
                <span class="type">Console</span>.WriteLine($<span class="string">&quot;Number of walls: {federation.FederatedInstances.CountOf&lt;IIfcWall&gt;()}&quot;</span>);
                <span class="keyword">foreach</span> (<span class="keyword">var</span> refModel <span class="keyword">in</span> federation.ReferencedModels)
                {
                    <span class="type">Console</span>.WriteLine();
                    <span class="type">Console</span>.WriteLine($<span class="string">&quot;    Referenced model: {refModel.Name}&quot;</span>);
                    <span class="type">Console</span>.WriteLine($<span class="string">&quot;    Referenced model organization: {refModel.OwningOrganisation}&quot;</span>);
                    <span class="type">Console</span>.WriteLine($<span class="string">&quot;    Number of walls: {refModel.Model.Instances.CountOf&lt;IIfcWall&gt;()}&quot;</span>);

                }

                <span class="comment">//you can save information about the federation for a future use</span>
                federation.SaveAs(<span class="string">&quot;federation.ifc&quot;</span>);
            }
        }
    }
}

</code></pre></div>

<p>Console output will look like this:</p>

<pre><code>Model is federation: True
Number of overall entities: 50303
Number of walls: 8

    Referenced model: SampleHouse.ifc
    Referenced model organization: Bob The Builder
    Number of walls: 5

    Referenced model: SampleHouseExtension.ifc
    Referenced model organization: Tyna
    Number of walls: 3
</code></pre>

<p>Federation settings saved as IFC file look like this. This convention is purely our invention so it won't work with other tools. But it will allows you
to create federations in your system and reopen them again once needed.</p>

<div class="step"><pre><code>ISO-10303-21;
HEADER;
FILE_DESCRIPTION ((<span class="string">&#39;&#39;</span>), <span class="string">&#39;2;1&#39;</span>);
FILE_NAME (<span class="string">&#39;&#39;</span>, <span class="string">&#39;2016-10-27T13:14:43&#39;</span>, (<span class="string">&#39;&#39;</span>), (<span class="string">&#39;&#39;</span>), <span class="string">&#39;Xbim File Processor version 3.2.0.0&#39;</span>, <span class="string">&#39;Xbim version 3.2.0.0&#39;</span>, <span class="string">&#39;&#39;</span>);
FILE_SCHEMA ((<span class="string">&#39;IFC4&#39;</span>));
ENDSEC;
DATA;
<span class="number">#1</span>=<span class="type">IFCACTORROLE</span>(.USERDEFINED.,<span class="string">&#39;Original Constructor&#39;</span>,$);
<span class="number">#2</span>=<span class="type">IFCORGANIZATION</span>($,<span class="string">&#39;Bob The Builder&#39;</span>,$,(<span class="number">#1</span>),$);
<span class="number">#3</span>=<span class="type">IFCDOCUMENTINFORMATION</span>(<span class="string">&#39;1&#39;</span>,<span class="string">&#39;SampleHouse.ifc&#39;</span>,$,$,$,<span class="string">&#39;XbimReferencedModel&#39;</span>,$,$,<span class="number">#2</span>,$,$,$,$,$,$,$,$);
<span class="number">#4</span>=<span class="type">IFCACTORROLE</span>(.USERDEFINED.,<span class="string">&#39;Extensions Builder&#39;</span>,$);
<span class="number">#5</span>=<span class="type">IFCORGANIZATION</span>($,<span class="string">&#39;Tyna&#39;</span>,$,(<span class="number">#4</span>),$);
<span class="number">#6</span>=<span class="type">IFCDOCUMENTINFORMATION</span>(<span class="string">&#39;2&#39;</span>,<span class="string">&#39;SampleHouseExtension.ifc&#39;</span>,$,$,$,<span class="string">&#39;XbimReferencedModel&#39;</span>,$,$,<span class="number">#5</span>,$,$,$,$,$,$,$,$);
ENDSEC;
END-ISO-10303-21;

</code></pre></div>

    </div>
    <div id="invitation" class="container collapse">
		<p>
		Want to stay updated on xbim news and developments?
		</p>
		<a class="btn btn-primary" target="_blank" href="https://share.hsforms.com/1IQizWxh-SGCOQ0CQnikEJw3myli" target="_blank">Sign up for a newsletter</a>
		<button class="btn btn-default" id="btn-invitation-dismiss">Dismiss</button>
	</div>

	<div class="brands-container">
	<p><small>Some of the companies using xbim toolkit:</small></p>
		<a target="_blank" href="https://www.xbim.net"><img style="height:65px;" src="../img/xBim_parent_logo_white.svg" class="brand" alt="xbim ltd."></a>
		<img src="../img/logos/northumbria_logo_gray.png" class="brand"/>
		<img src="../img/logos/viewpoint_logo_gray.png" class="brand"/>
		<img src="../img/logos/welplan_logo_gray.png" class="brand"/>
		<img src="../img/logos/nbs_logo_gray.png" class="brand"/>
		<img src="../img/logos/bim_academy_logo_gray.png" class="brand"/>
		<img src="../img/logos/di5_logo_gray.png" class="brand"/>
		<img src="../img/logos/SEMA_logo_gray.png" class="brand"/>
	</div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>
	<script src="../js/invitation.js"></script>
  </body>
</html>
